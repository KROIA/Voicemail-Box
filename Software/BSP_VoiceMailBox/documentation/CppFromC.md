# Call C++ code from C
STM provides a c application by default. When a C++ Application is created, little work must be made in order to switch to a C++ code enviroment.

## Setup
### Project setup
* Make sure you enable C/C++ when creating a STM Project.

### Create the Application code files

> Application.h
> Application.cpp

```C++
// Application.h
#ifndef APPLICATION_H
#define APPLICATION_H

#ifdef __cplusplus
extern "C" {
#endif

// C functions, callable from c and c++ code
extern void setup();
extern void loop();

#ifdef __cplusplus
}
#endif
#endif /* APPLICATION_H */
```

```C++
// Application.cpp
#include "Application.h"

void setup()
{
    // C++ code can be placed here
}

void loop()
{
    // C++ code can be placed here
}
```

### Call the Application functions from the main

```C
// ...
/* USER CODE BEGIN Includes */
#include "Application.h"
/* USER CODE END Includes */
// ...

int main(void)
{
    HAL_Init();
    // init functions, generated by CubeMX

    /* USER CODE BEGIN 2 */
    setup(); // Calls the setup function from the Application.h
    /* USER CODE END 2 */

    /* USER CODE BEGIN WHILE */
    while (1)
    {
        loop(); // Calls the loop function from the Application.h
        /* USER CODE END WHILE */
        // ...
    }
}
```
